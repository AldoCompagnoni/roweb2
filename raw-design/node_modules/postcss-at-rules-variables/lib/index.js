'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _postcss=require('postcss');var _postcss2=_interopRequireDefault(_postcss);var _lodash=require('lodash');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function hasVar(str){return str.indexOf('var(')}function resolveValue(value,maps){if(hasVar(value)===-1){return value}return value.replace(/var\(--.*?\)/g,function(match){return maps[match.slice(4,-1)]||match})}function getProperty(nodes){var propertys={};nodes.walkRules(function(rule){if(rule.selector!==':root'){return}rule.each(function(_ref){var prop=_ref.prop;var value=_ref.value;propertys[prop]=value})});return propertys}exports.default=_postcss2.default.plugin('postcss-at-rules-variables',function(options){var DEFAULT={atRules:['for','if','else','each']};var opt=(0,_lodash.mergeWith)(DEFAULT,options,function(a,b){if(Array.isArray(a)){return a.concat(b)}});return function(nodes){var maps=getProperty(nodes);var atRules=opt.atRules;nodes.walkAtRules(new RegExp(atRules.join('|')),function(rules){rules.params=resolveValue(rules.params,maps)})}});module.exports=exports['default'];